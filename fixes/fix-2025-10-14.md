# Fix: Call to undefined function hasSelectedClient()

**Date:** October 14, 2025  
**Error:** `Call to undefined function hasSelectedClient()`  
**Location:** `resources/views/dashboard.blade.php:11`

## Problem Description

The application throws an error when accessing the dashboard because it cannot find the `hasSelectedClient()` helper function, even though the function is defined in `app/helpers.php`.

## Root Cause

The helper functions are properly defined in `app/helpers.php` (lines 30-40) and the file is registered in `composer.json` under the autoload section:

```json
"autoload": {
    "psr-4": {
      "App\\": "app/",
      "Database\\Factories\\": "database/factories/",
      "Database\\Seeders\\": "database/seeders/"
    },
    "files": [
      "app/helpers.php"
    ]
}
```

However, when you add or modify the autoload configuration in `composer.json`, **Laravel doesn't automatically pick up these changes**. The autoloader cache needs to be regenerated.

## Solution

Run the following command in your terminal:

```bash
composer dump-autoload
```

This command regenerates Composer's autoloader files, which will properly load the `app/helpers.php` file and make all the helper functions available throughout your application.

## What This Command Does

- `composer dump-autoload` regenerates the list of all classes that need to be included in the project
- It updates the autoloader to recognize new files added to the `files` array in `composer.json`
- It doesn't download or update any packages; it just refreshes the autoload configuration

## Affected Helper Functions

The following helper functions in `app/helpers.php` will become available after running the command:

1. **`hasSelectedClient()`** - Checks if a client is currently selected (line 30-40)
2. **`selectedClient()`** - Gets the currently selected client from session (line 6-16)
3. **`selectedClientId()`** - Gets the currently selected client ID from session (line 18-28)

## How These Helpers Work

These helper functions use the `ClientHelper` class located in `app/Helpers/ClientHelper.php`:

- They check and retrieve the selected client data from the session
- The session stores `selected_client_id` and `selected_client` keys
- This allows the application to maintain context about which client the user is currently working with

## Verification

After running `composer dump-autoload`, refresh your browser and the dashboard should load without errors. The page will display:

- A welcome message with your name
- The currently selected client information (if a client is selected)
- Or a prompt to select a client (if no client is selected)

## Important Note

**Always run `composer dump-autoload` whenever you:**

- Add new files to the `autoload.files` array in `composer.json`
- Modify the autoload configuration
- Create new helper files that should be globally available

## Alternative Solutions (Not Needed in This Case)

If for some reason `composer dump-autoload` doesn't work, you could also try:

```bash
# Clear all Laravel caches
php artisan cache:clear
php artisan config:clear
php artisan view:clear

# Then regenerate autoloader
composer dump-autoload

# Optimize for production (optional)
php artisan optimize
```

However, the simple `composer dump-autoload` command should be sufficient for this specific issue.
